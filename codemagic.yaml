
workflows:
  ios-native-workflow:
    name: iOS Native
    max_build_duration: 120
    instance_type: mac_mini_m1
    environment:
      vars: # Define your environment variables here
        APP_STORE_CONNECT_ISSUER_ID: dd83b7e9-4188-4ac1-9c67-7c379c1af521
        APP_STORE_CONNECT_KEY_IDENTIFIER: YCDL5ZD6HL
        APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JR1RBZ0VBTUJNR0J5cUdTTTQ5QWdFR0NDcUdTTTQ5QXdFSEJIa3dkd0lCQVFRZ04zMkdlNlRkaFNNQlQyb2QKQlJFc21yTGZxZVZ6V3FZbFNya05GWXRzbHZpZ0NnWUlLb1pJemowREFRZWhSQU5DQUFUSkFtV1hDbjFMSHlBQgpiVXM2Z0Nta0tlQjM3UUJIOWRIekhPWUJEL005akhjYUJRZGo0UDY5VFVwR05wS3U4QjhKZWN5VFVyMk1iVGxlCjl5aDBScTJ3Ci0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0=)
        CERTIFICATE_PRIVATE_KEY: Encrypted(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) 
    environment:
      ios_signing:
        distribution_type: ad_hoc
        bundle_identifier: com.pig.common
      vars:
        BUNDLE_ID: "com.pig.common"
        XCODE_WORKSPACE: "SwiftUIAllTerms.xcodeproj" # <-- Put the name of your Xcode workspace here
        XCODE_SCHEME: "SwiftUIAllTerms" # <-- Put the name of your Xcode scheme here
        APP_STORE_APPLE_ID: 6459408583
      xcode: latest
      cocoapods: default
    scripts:
      - name: Install CocoaPods dependencies
        script: | 
          pod install
      - name: Set up provisioning profiles settings on Xcode project
        script: xcode-project use-profiles
      - name: Increment build number
        script: | 
          cd $CM_BUILD_DIR
          LATEST_BUILD_NUMBER=$(app-store-connect get-latest-app-store-build-number "$APP_STORE_APPLE_ID")
          agvtool new-version -all $(($LATEST_BUILD_NUMBER + 1))
      - name: Build ipa for distribution
        script: | 
          xcode-project build-ipa \
            --workspace "$CM_BUILD_DIR/$XCODE_WORKSPACE" \
            --scheme "$XCODE_SCHEME"
    artifacts:
      - build/ios/ipa/*.ipa
      - /tmp/xcodebuild_logs/*.log
      - $HOME/Library/Developer/Xcode/DerivedData/**/Build/**/*.app
      - $HOME/Library/Developer/Xcode/DerivedData/**/Build/**/*.dSYM
    publishing:
      email:
        recipients:
          - yogesh.mnd@gmail.com
          - yogesh.sharma@mobileprogramming.com
        notify:
          success: true
          failure: false
      app_store_connect:
        auth: integration

        # Configuration related to TestFlight (optional)
        # Note: This action is performed during post-processing.
        submit_to_testflight: true
        beta_groups: # Specify the names of beta tester groups that will get access to the build once it has passed beta review.
          - pig

        # Configuration related to App Store (optional)
        # Note: This action is performed during post-processing.
        submit_to_app_store: false
